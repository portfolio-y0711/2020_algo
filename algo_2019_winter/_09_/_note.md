## 디스크 컨트롤러

https://programmers.co.kr/learn/courses/30/lessons/42627

#### 문제 설명

하드디스크는 한 번에 하나의 작업만 수행할 수 있습니다. 디스크 컨트롤러를 구현하는 방법은 여러 가지가 있습니다. 가장 일반적인 방법은 요청이 들어온 순서대로 처리하는 것입니다.

예를들어

```
- 0ms 시점에 3ms가 소요되는 A작업 요청
- 1ms 시점에 9ms가 소요되는 B작업 요청
- 2ms 시점에 6ms가 소요되는 C작업 요청
```

와 같은 요청이 들어왔습니다. 이를 그림으로 표현하면 아래와 같습니다.

![](https://i.imgur.com/rSD4zaz.png)

한 번에 하나의 요청만을 수행할 수 있기 때문에 각각의 작업을 요청받은 순서대로 처리하면 다음과 같이 처리 됩니다.

![](https://i.imgur.com/XXZuc2M.png)

```
- A: 3ms 시점에 작업 완료 (요청에서 종료까지 : 3ms)
- B: 1ms부터 대기하다가, 3ms 시점에 작업을 시작해서 12ms 시점에 작업 완료(요청에서 종료까지 : 11ms)
- C: 2ms부터 대기하다가, 12ms 시점에 작업을 시작해서 18ms 시점에 작업 완료(요청에서 종료까지 : 16ms)
```

이 때 각 작업의 요청부터 종료까지 걸린 시간의 평균은 10ms(= (3 + 11 + 16) / 3)가 됩니다.

하지만 A → C → B 순서대로 처리하면

!()[https://i.imgur.com/kNe8304.png]

```
- A: 3ms 시점에 작업 완료(요청에서 종료까지 : 3ms)
- C: 2ms부터 대기하다가, 3ms 시점에 작업을 시작해서 9ms 시점에 작업 완료(요청에서 종료까지 : 7ms)
- B: 1ms부터 대기하다가, 9ms 시점에 작업을 시작해서 18ms 시점에 작업 완료(요청에서 종료까지 : 17ms)
```

이렇게 A → C → B의 순서로 처리하면 각 작업의 요청부터 종료까지 걸린 시간의 평균은 9ms(= (3 + 7 + 17) / 3)가 됩니다.

각 작업에 대해 [작업이 요청되는 시점, 작업의 소요시간]을 담은 2차원 배열 `jobs`가 매개변수로 주어질 때, 작업의 요청부터 종료까지 걸린 시간의 평균을 가장 줄이는 방법으로 처리하면 평균이 얼마가 되는지 return 하도록 solution 함수를 작성해주세요. (단, 소수점 이하의 수는 버립니다)

#### 제한 사항

* `jobs`의 길이는 1 이상 500 이하입니다.
* `jobs`의 각 행은 하나의 작업에 대한 [`작업이 요청되는 시점`, `작업의 소요시간`] 입니다.
* 각 작업에 대해 작업이 요청되는 시간은 0 이상 1,000 이하입니다.
* 각 작업에 대해 작업의 소요시간은 1 이상 1,000 이하입니다.
* 하드디스크가 작업을 수행하고 있지 않을 때에는 먼저 요청이 들어온 작업부터 처리합니다.

#### 입출력 예

| jobs | return |
| :--- | ---: |
| [[0, 3], [1, 9], [2, 6]] | 9 |
| [[24, 10], [18, 39], [34, 20], [37, 5], [47, 22], [20, 47], [15, 2], [15, 34], [35, 43], [26, 1]] | 74 |
| [[0, 3], [1, 9], [500, 6]] | 6 |
| [[0, 5], [1, 2], [5, 5]] | 6 |
| [[0, 9], [0, 4], [0, 5], [0, 7], [0, 3]] | 13 |
| [[1, 9], [1, 4], [1, 5], [1, 7], [1, 3]] | 13 |
| [[0, 3], [1, 9], [2, 6], [4, 3]] | 9 |
| [[0, 0], [1, 0], [2, 0], [3, 0]] | 0 |
| [[0, 10], [0, 5], [2, 3], [2, 7], [8, 10], [8, 1]] | 14 |

#### 입출력 예 설명

문제에 주어진 예와 같습니다.    

* 0ms 시점에 3ms 걸리는 작업 요청이 들어옵니다.
* 1ms 시점에 9ms 걸리는 작업 요청이 들어옵니다.
* 2ms 시점에 6ms 걸리는 작업 요청이 들어옵니다.

## 풀이

현재 유휴 시간<sup>`idle time`</sup>을 기준으로 다음에 수행할 작업을 선택한다.

1. 유휴 시간 이전에 요청된 작업중 실행 시간(`job[1]`)이 가장 짧은 작업을 선택

    ![](https://i.imgur.com/lSFJnIB.png)

2. 유휴 시간 이후에 요청이 온 작업 중 실행 시점(`job[0]`)이 가장 짧은 작업을 선택

    ![](https://i.imgur.com/wJVw8oM.png)

3. 만약 같은 실행 시점의 작업이 여러 개일 경우 실행 시간(`job[1]`)이 가장 짧은 작업을 선택

    ![](https://i.imgur.com/LNwkHLB.png)
    
4. 1~3을 유휴 시간(`time`)마다 반복한다.

#### 예제 #1

```
jobs = [0, 3] [1, 9] [2, 6]

next(time = 0ms)
jobs = [0, 3] [1, 9] [2, 6]
job = [0, 3] (3ms)

next(time = 3ms)
jobs = [-1, 3] [1, 9] [2, 6]
job = [2, 6] (7ms)

next(time = 9ms)
jobs = [-1, 3] [1, 9] [-1, 6]
job = [1, 9] (17ms)
```

#### 예제 #2

```
jobs = [24, 10] [18, 39] [34, 20] [37, 5] [47, 22] [20, 47] [15, 2] [15, 34] [35, 43] [26, 1]

next(time = 0ms)
jobs = [24, 10] [18, 39] [34, 20] [37, 5] [47, 22] [20, 47] [15, 2] [15, 34] [35, 43] [26, 1]
job = [15, 2] (2ms)

next(time = 17ms)
jobs = [24, 10] [18, 39] [34, 20] [37, 5] [47, 22] [20, 47] [-1, 2] [15, 34] [35, 43] [26, 1]
job = [15, 34] (36ms)

next(time = 51ms)
jobs = [24, 10] [18, 39] [34, 20] [37, 5] [47, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [26, 1]
job = [26, 1] (26ms)

next(time = 52ms)
jobs = [24, 10] [18, 39] [34, 20] [37, 5] [47, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [-1, 1]
job = [37, 5] (20ms)

next(time = 57ms)
jobs = [24, 10] [18, 39] [34, 20] [-1, 5] [47, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [-1, 1]
job = [24, 10] (43ms)

next(time = 67ms)
jobs = [-1, 10] [18, 39] [34, 20] [-1, 5] [47, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [-1, 1]
job = [34, 20] (53ms)

next(time = 87ms)
jobs = [-1, 10] [18, 39] [-1, 20] [-1, 5] [47, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [-1, 1]
job = [47, 22] (62ms)

next(time = 109ms)
jobs = [-1, 10] [18, 39] [-1, 20] [-1, 5] [-1, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [-1, 1]
job = [18, 39] (130ms)

next(time = 148ms)
jobs = [-1, 10] [-1, 39] [-1, 20] [-1, 5] [-1, 22] [20, 47] [-1, 2] [-1, 34] [35, 43] [-1, 1]
job = [35, 43] (156ms)

next(time = 191ms)
jobs = [-1, 10] [-1, 39] [-1, 20] [-1, 5] [-1, 22] [20, 47] [-1, 2] [-1, 34] [-1, 43] [-1, 1]
job = [20, 47] (218ms)
```

#### 예제 #3

```
jobs = [0, 3] [1, 9] [500, 6]

next(time = 0ms)
jobs = [0, 3] [1, 9] [500, 6]
job = [0, 3] (3ms)

next(time = 3ms)
jobs = [-1, 3] [1, 9] [500, 6]
job = [1, 9] (11ms)

next(time = 12ms)
jobs = [-1, 3] [-1, 9] [500, 6]
job = [500, 6] (6ms)
```

#### 예제 #4

```
jobs = [0, 5] [1, 2] [5, 5]

next(time = 0ms)
jobs = [0, 5] [1, 2] [5, 5]
job = [0, 5] (5ms)

next(time = 5ms)
jobs = [-1, 5] [1, 2] [5, 5]
job = [1, 2] (6ms)

next(time = 7ms)
jobs = [-1, 5] [-1, 2] [5, 5]
job = [5, 5] (7ms)
```

#### 예제 #5

```
jobs = [0, 9] [0, 4] [0, 5] [0, 7] [0, 3]

next(time = 0ms)
jobs = [0, 9] [0, 4] [0, 5] [0, 7] [0, 3]
job = [0, 3] (3ms)

next(time = 3ms)
jobs = [0, 9] [0, 4] [0, 5] [0, 7] [-1, 3]
job = [0, 4] (7ms)

next(time = 7ms)
jobs = [0, 9] [-1, 4] [0, 5] [0, 7] [-1, 3]
job = [0, 5] (12ms)

next(time = 12ms)
jobs = [0, 9] [-1, 4] [-1, 5] [0, 7] [-1, 3]
job = [0, 7] (19ms)

next(time = 19ms)
jobs = [0, 9] [-1, 4] [-1, 5] [-1, 7] [-1, 3]
job = [0, 9] (28ms)
```

#### 예제 #6

```
jobs = [1, 9] [1, 4] [1, 5] [1, 7] [1, 3]

next(time = 0ms)
jobs = [1, 9] [1, 4] [1, 5] [1, 7] [1, 3]
job = [1, 3] (3ms)

next(time = 4ms)
jobs = [1, 9] [1, 4] [1, 5] [1, 7] [-1, 3]
job = [1, 4] (7ms)

next(time = 8ms)
jobs = [1, 9] [-1, 4] [1, 5] [1, 7] [-1, 3]
job = [1, 5] (12ms)

next(time = 13ms)
jobs = [1, 9] [-1, 4] [-1, 5] [1, 7] [-1, 3]
job = [1, 7] (19ms)

next(time = 20ms)
jobs = [1, 9] [-1, 4] [-1, 5] [-1, 7] [-1, 3]
job = [1, 9] (28ms)
```

#### 예제 #7

```
jobs = [0, 3] [1, 9] [2, 6] [4, 3]

next(time = 0ms)
jobs = [0, 3] [1, 9] [2, 6] [4, 3]
job = [0, 3] (3ms)

next(time = 3ms)
jobs = [-1, 3] [1, 9] [2, 6] [4, 3]
job = [2, 6] (7ms)

next(time = 9ms)
jobs = [-1, 3] [1, 9] [-1, 6] [4, 3]
job = [4, 3] (8ms)

next(time = 12ms)
jobs = [-1, 3] [1, 9] [-1, 6] [-1, 3]
job = [1, 9] (20ms)
```

#### 예제 #8

```
jobs = [0, 0] [1, 0] [2, 0] [3, 0]

next(time = 0ms)
jobs = [0, 0] [1, 0] [2, 0] [3, 0]
job = [0, 0] (0ms)

next(time = 0ms)
jobs = [-1, 0] [1, 0] [2, 0] [3, 0]
job = [1, 0] (0ms)

next(time = 1ms)
jobs = [-1, 0] [-1, 0] [2, 0] [3, 0]
job = [2, 0] (0ms)

next(time = 2ms)
jobs = [-1, 0] [-1, 0] [-1, 0] [3, 0]
job = [3, 0] (0ms)
```

#### 예제 #9

```
jobs = [0, 10] [0, 5] [2, 3] [2, 7] [8, 10] [8, 1]

next(time = 0ms)
jobs = [0, 10] [0, 5] [2, 3] [2, 7] [8, 10] [8, 1]
job = [0, 5] (5ms)

next(time = 5ms)
jobs = [0, 10] [-1, 5] [2, 3] [2, 7] [8, 10] [8, 1]
job = [2, 3] (6ms)

next(time = 8ms)
jobs = [0, 10] [-1, 5] [-1, 3] [2, 7] [8, 10] [8, 1]
job = [2, 7] (13ms)

next(time = 15ms)
jobs = [0, 10] [-1, 5] [-1, 3] [-1, 7] [8, 10] [8, 1]
job = [8, 1] (8ms)

next(time = 16ms)
jobs = [0, 10] [-1, 5] [-1, 3] [-1, 7] [8, 10] [-1, 1]
job = [0, 10] (26ms)

next(time = 26ms)
jobs = [-1, 10] [-1, 5] [-1, 3] [-1, 7] [8, 10] [-1, 1]
job = [8, 10] (28ms)
```
# [디스크 컨트롤러](https://programmers.co.kr/learn/courses/30/lessons/42627) 
> 

### 코드 및 실행결과

* [실패](disk_controller.ts) : 타입스크립트로 작성한 코드  
  ![결과](./disk_controller_fail_typescript.png)

### 참고자료

* [[알고리즘] 힙 정렬(heap sort)이란](https://gmlwjd9405.github.io/2018/05/10/algorithm-heap-sort.html)
* [[자료구조] 힙(heap)이란](https://gmlwjd9405.github.io/2018/05/10/data-structure-heap.html)
* [Sorting an array by multiple criteria with vanilla JavaScript](https://gomakethings.com/sorting-an-array-by-multiple-criteria-with-vanilla-javascript/)

